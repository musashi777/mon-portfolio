{{ define "main" }}

{{ if .IsSection }}
  <div class="prose dark:prose-invert max-w-none">
    <h1 class="text-center">{{ .Title }}</h1>
    <p class="text-center">{{ .Content }}</p>
  </div>

  <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-5">
    {{ range .Pages.ByDate.Reverse }}
      <div class="flex flex-col rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-neutral-800 overflow-hidden">
        {{ with .Params.image }}
          <a href="{{ $.RelPermalink }}" class="block aspect-video"><img src="{{ . | relURL }}" alt="{{ $.Title }}" class="w-full h-full object-cover"></a>
        {{ end }}
        <div class="p-4 flex flex-col flex-grow">
          <h2 class="!my-0 !text-xl font-bold"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="!my-2 text-sm">{{ .Params.description | default .Summary }}</p>
          <div class="mt-4 pt-4 border-t border-neutral-300 dark:border-neutral-700 text-sm space-y-2">
            {{ with .Params.niveau }}
              <div class="flex justify-between"><strong>Niveau:</strong><span>{{ . }}</span></div>
            {{ end }}
            {{ with .Params.technologies }}
              <div class="flex justify-between"><strong>Technologies:</strong><span>{{ delimit . ", " }}</span></div>
            {{ end }}
          </div>
          <div class="mt-auto pt-4">
            <a href="{{ .RelPermalink }}" class="font-semibold !no-underline px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors">
              Voir le projet
            </a>
          </div>
        </div>
      </div>
    {{ end }}
  </div>

{{ else }}
  <article>
    {{ with .Params.image }}
      <img src="{{ . | relURL }}" alt="{{ .Title }}" class="w-full h-64 object-cover rounded-lg shadow-lg mb-8">
    {{ end }}

    <h1 class="!text-4xl text-center mb-12">{{ .Title }}</h1>

    <div class="prose dark:prose-invert max-w-none mb-12">
      {{ .Content }}
    </div>

    <hr class="my-12" />

    <div class="prose dark:prose-invert max-w-none">
      {{ with .Resources.GetMatch "details.md" }}
        {{ .Content }}
      {{ end }}
    </div>
  </article>
{{ end }}

{{ end }}
